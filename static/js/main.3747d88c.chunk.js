(this["webpackJsonpcode-send-frontend"]=this["webpackJsonpcode-send-frontend"]||[]).push([[0],{252:function(e,t,a){e.exports=a(405)},405:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(66),c=a.n(l),u=(a(256),a(422)),o=a(423),i=a(52),d=a(40),m=function(){return r.a.createElement("div",{"data-testid":"page-dashboard"},"dashboard page")},s=a(46),b=a(419),E=a(406),p=a(420),h=a(415),f=a(79),v=a(80),g=a(104),C=a.n(g),O=function(){function e(t){Object(f.a)(this,e),this.baseURL=void 0,this.baseURL=t}return Object(v.a)(e,[{key:"handleError",value:function(e){var t=e.data,a=t.status,n=t.message;return"error"===a?Promise.reject(n):e}},{key:"get",value:function(e){return C.a.get(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}},{key:"post",value:function(e,t){return C.a.post(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"put",value:function(e,t){return C.a.put(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"delete",value:function(e){return C.a.delete(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}}]),e}(),j=Object({NODE_ENV:"production",PUBLIC_URL:"/code-send"}).REACT_APP_CODE_SEND_SERVICE_URL,y=new O(j),w=function(){return y.get("/update")},U=function(e){return y.post("/update",e)},k=function(e,t){var a=new FormData;return a.append("bundle",t),y.put("/update/".concat(e,"/bundle"),a)},R=a(100),S=a.n(R),L=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),u=Object(s.a)(c,2),o=u[0],d=u[1];Object(n.useEffect)((function(){d(!0),w().then((function(e){return l(e)})).catch((function(e){return S()({title:"Failed",text:e.message,icon:"error"})})).finally((function(){return d(!1)}))}),[]);return r.a.createElement("div",{"data-testid":"page-update-log"},r.a.createElement(E.a,{as:i.b,to:"/update/create",primary:!0,"data-testid":"button-create-update"},"Create New Update"),o?r.a.createElement(p.a,{active:!0,inverted:!0},r.a.createElement(h.a,{inverted:!0,size:"medium"},"Getting Update")):r.a.createElement(b.a,null,r.a.createElement(b.a.Header,null,r.a.createElement(b.a.Row,null,r.a.createElement(b.a.HeaderCell,null,"No"),r.a.createElement(b.a.HeaderCell,null,"Date"),r.a.createElement(b.a.HeaderCell,null,"Version"),r.a.createElement(b.a.HeaderCell,null,"Note"),r.a.createElement(b.a.HeaderCell,null,"Action"))),r.a.createElement(b.a.Body,{"data-testid":"table-body-update-log"},a.map((function(e,t){return r.a.createElement(b.a.Row,{key:e._id},r.a.createElement(b.a.Cell,null,t+1),r.a.createElement(b.a.Cell,null,e.created_at),r.a.createElement(b.a.Cell,null,e.version),r.a.createElement(b.a.Cell,null,e.note),r.a.createElement(b.a.Cell,null,r.a.createElement(E.a,{as:"a",href:e.bundleUrl,basic:!0},"Download")))})))))},_=a(167),x=a.n(_),F=a(225),B=a(226),D=a(417),N=a(416),H=a(56),I=function(e){var t=e.name,a=e.label,n=Object(H.b)({name:t}),l=Object(s.a)(n,2),c=l[0],u=l[1];return r.a.createElement(D.a.Field,Object.assign({id:t,label:a,control:N.a,error:u.error},c))},V=a(421),P=function(e){var t=e.label,a=e.name,n=Object(H.b)({name:a}),l=Object(s.a)(n,3),c=l[0],u=l[1],o=l[2],i=null,d=function(){return void 0!==u.error},m=function(){i&&i.click()},b=function(e){var t=e.target.files&&e.target.files[0];o.setValue(t)};return r.a.createElement(D.a.Field,{error:d()},r.a.createElement("label",{htmlFor:t},t),r.a.createElement("input",{id:t,type:"file",ref:function(e){return i=e},hidden:!0,onChange:b,onBlur:c.onBlur}),r.a.createElement(E.a,{type:"button",icon:"upload",content:"Choose File",negative:d(),basic:!0,onClick:m,style:{marginRight:10}}),function(){var e=d()?u.error:c.value?c.value.name:"";return e&&r.a.createElement(V.a,{negative:d(),compact:!0,size:"tiny"},e)}())},q=function(e){var t=e.children,a=Object(H.c)().handleSubmit;return r.a.createElement(D.a,{onSubmit:a},t)},z=a(105),A=z.b().shape({version:z.c().required(),note:z.c().required(),bundle:z.a().required()}),J={version:"",note:""},W=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(d.g)(),u=function(){var e=Object(B.a)(x.a.mark((function e(t){var a,n,r,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.bundle,n=Object(F.a)(t,["bundle"]),e.prev=1,l(!0),e.next=5,U(n);case 5:return r=e.sent,u=r._id,e.next=9,k(u,a);case 9:S()({title:"Success",text:"Update Created",icon:"success"}),c.push("/update"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),S()({title:"Failed",text:e.t0.message,icon:"error"});case 16:return e.prev=16,l(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{"data-testid":"page-update-form"},a?r.a.createElement(p.a,{active:!0,inverted:!0},r.a.createElement(h.a,{inverted:!0,size:"medium"},"Submitting Update")):r.a.createElement(H.a,{initialValues:J,validationSchema:A,onSubmit:u},r.a.createElement(q,null,r.a.createElement(I,{name:"version",label:"Version"}),r.a.createElement(I,{name:"note",label:"Note"}),r.a.createElement(P,{name:"bundle",label:"Bundle"}),r.a.createElement(E.a,{type:"submit",primary:!0},"Submit"))))},G=function(){return r.a.createElement("div",{"data-testid":"page-update"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/update/log",component:L}),r.a.createElement(d.b,{path:"/update/create",component:W}),r.a.createElement(d.b,{render:function(){return r.a.createElement(d.a,{to:"/update/log"})}})))},T=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Item,{header:!0},"Code Send")),r.a.createElement(o.a,{columns:2},r.a.createElement(o.a.Column,{width:3},r.a.createElement(u.a,{vertical:!0},r.a.createElement(u.a.Item,{as:i.b,to:"/dashboard","data-testid":"menu-item-dashboard"},"Dashboard"),r.a.createElement(u.a.Item,{as:i.b,to:"/update","data-testid":"menu-item-update"},"Update Log"))),r.a.createElement(o.a.Column,null,r.a.createElement(d.b,{path:"/dashboard",component:m}),r.a.createElement(d.b,{path:"/update",component:G}),r.a.createElement(d.b,{render:function(){return r.a.createElement(d.a,{to:"/dashboard"})}}))))},$=function(){return r.a.createElement(i.a,null,r.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[252,1,2]]]);
//# sourceMappingURL=main.3747d88c.chunk.js.map