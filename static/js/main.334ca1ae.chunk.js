(this["webpackJsonpcode-send-frontend"]=this["webpackJsonpcode-send-frontend"]||[]).push([[0],{262:function(e,t,a){e.exports=a(473)},473:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(9),o=a.n(c),u=a(66);Object.defineProperty(window,"matchMedia",{writable:!0,value:jest.fn().mockImplementation((function(e){return{matches:!1,media:e,onchange:null,addListener:jest.fn(),removeListener:jest.fn(),addEventListener:jest.fn(),removeEventListener:jest.fn(),dispatchEvent:jest.fn()}}))});window;var s,l=a(484),i=a(81),d=a(485),m=a(98),p=a(41),f=a(480),E=a(37),b=a(36),v=a.n(b),j=a(243),h=a(244),g=a(112),O=a.n(g),C=function(){function e(t){Object(j.a)(this,e),this.baseURL=void 0,this.baseURL=t}return Object(h.a)(e,[{key:"handleError",value:function(e){var t=e.data,a=t.status,r=t.message;return"error"===a?Promise.reject(r):e}},{key:"get",value:function(e){return O.a.get(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}},{key:"post",value:function(e,t){return O.a.post(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"put",value:function(e,t){return O.a.put(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"delete",value:function(e){return O.a.delete(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}}]),e}(),y=Object({NODE_ENV:"production",PUBLIC_URL:"/code-send"}).REACT_APP_CODE_SEND_SERVICE_URL,S=new C(y),k=function(){return S.get("/project")},G=function(e){return S.post("/project",e)},R=function(e){return S.get("/project/".concat(e,"/update"))},w=function(e){return S.get("/project/".concat(e,"/update/latest"))},U=function(e,t){return S.post("/project/".concat(e,"/update"),t)},P=function(e,t,a){var r=new FormData;return r.append("bundle",a),S.put("/project/".concat(e,"/update/").concat(t,"/bundle"),r)},L=a(482),q=function(){return{handleSuccess:Object(r.useCallback)((function(e,t){L.a.success({message:e,description:t})}),[]),handleError:Object(r.useCallback)((function(e,t){L.a.error({message:e,description:t})}),[])}},x=a(46),I=function(e){var t=Object.keys(e),a=Object.values(e),r=new Map,n=new Map;return t.forEach((function(e,t){r.set(e,a[t][1])})),a.forEach((function(e,a){n.set(t[a],e[0])})),[function(e,a){var r,c=!1,o=new Map;return t.forEach((function(t){var u=n.get(t),s=e[t];r=u(s,a),c=c||r!==s,o.set(t,r)})),c?Object.fromEntries(o):e},Object.fromEntries(r)]},_=a(97);!function(e){e.GetRequest="@Project/GetRequest",e.GetSuccess="@Project/GetSuccess",e.GetError="@Project/GetError",e.CreateRequest="@Project/CreateRequest",e.CreateSuccess="@Project/CreateSuccess",e.CreateError="@Project/CreateError",e.Select="@Project/Select"}(s||(s={}));var T,F={items:[],selected:void 0,loading:!1,error:void 0},M=I({items:[function(e,t){var a=t.type,r=t.payload;switch(a){case s.GetSuccess:return Object(_.a)(r);case s.CreateSuccess:return[].concat(Object(_.a)(e),[r]);default:return e}},F.items],selected:[function(e,t){var a=t.type,r=t.payload;switch(a){case s.Select:return r;default:return e}},F.selected],loading:[function(e,t){switch(t.type){case s.GetRequest:case s.CreateRequest:return!0;case s.GetSuccess:case s.GetError:case s.CreateSuccess:case s.CreateError:return!1;default:return e}},F.loading],error:[function(e,t){var a=t.type,r=t.payload;switch(a){case s.GetError:case s.CreateError:return r;case s.GetSuccess:case s.CreateSuccess:return;default:return e}},F.error]});!function(e){e.GetRequest="@Update/GetRequest",e.GetSuccess="@Update/GetSuccess",e.GetError="@Update/GetError",e.CreateRequest="@Update/CreateRequest",e.CreateSuccess="@Update/CreateSuccess",e.CreateError="@Update/CreateError",e.GetLatestRequest="@Update/GetLatestRequest",e.GetLatestSuccess="@Update/GetLatestSuccess",e.GetLatestError="@Update/GetLatestError"}(T||(T={}));var N={items:[],latest:void 0,loading:!1,error:void 0},V=I({items:[function(e,t){var a=t.type,r=t.payload;switch(a){case T.GetSuccess:return Object(_.a)(r);case T.CreateSuccess:return[].concat(Object(_.a)(e),[r]);default:return e}},N.items],latest:[function(e,t){var a=t.type,r=t.payload;switch(a){case T.GetLatestSuccess:return r;default:return e}},N.latest],loading:[function(e,t){switch(t.type){case T.GetRequest:case T.CreateRequest:case T.GetLatestRequest:return!0;case T.GetSuccess:case T.GetError:case T.CreateSuccess:case T.CreateError:case T.GetLatestSuccess:case T.GetLatestError:return!1;default:return e}},N.loading],error:[function(e,t){var a=t.type,r=t.payload;switch(a){case T.GetError:case T.CreateError:case T.GetLatestError:return r;case T.GetSuccess:case T.CreateSuccess:case T.GetLatestSuccess:return;default:return e}},N.error]}),D=Object(x.a)(M,2),B=D[0],A=D[1],H=Object(x.a)(V,2),J=I({project:[B,A],update:[H[0],H[1]]}),K=Object(r.createContext)({state:{project:F,update:N},dispatch:function(){return null}}),W=K.Provider,Y=function(e){var t=e.children,a=Object(x.a)(J,2),c=a[0],o=a[1],u=Object(r.useReducer)(c,o),s=Object(x.a)(u,2),l=s[0],i=s[1];return n.a.createElement(W,{value:{state:l,dispatch:i}},t)},$=a(21),z=function(){return Object(r.useContext)(K)},Q=function(){return z().state.project},X=function(){var e=z().dispatch;return{getProjectRequest:Object(r.useCallback)((function(){return e(Object($.action)(s.GetRequest))}),[e]),getProjectSuccess:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(s.GetSuccess,e)}(t))}),[e]),getProjectError:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(s.GetError,e)}(t))}),[e]),createProjectRequest:Object(r.useCallback)((function(){return e(Object($.action)(s.CreateRequest))}),[e]),createProjectSuccess:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(s.CreateSuccess,e)}(t))}),[e]),createProjectError:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(s.CreateError,e)}(t))}),[e]),selectProject:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(s.Select,e)}(t))}),[e])}},Z=function(){return z().state.update},ee=function(){var e=z().dispatch;return{getUpdateRequest:Object(r.useCallback)((function(){return e(Object($.action)(T.GetRequest))}),[e]),getUpdateSuccess:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(T.GetSuccess,e)}(t))}),[e]),getUpdateError:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(T.GetError,e)}(t))}),[e]),createUpdateRequest:Object(r.useCallback)((function(){return e(Object($.action)(T.CreateRequest))}),[e]),createUpdateSuccess:Object(r.useCallback)((function(t){return e((a=t,Object($.action)(T.CreateSuccess,a)));var a}),[e]),createUpdateError:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(T.CreateError,e)}(t))}),[e]),getLatestUpdateRequest:Object(r.useCallback)((function(){return e(Object($.action)(T.GetLatestRequest))}),[e]),getLatestUpdateSuccess:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(T.GetLatestSuccess,e)}(t))}),[e]),getLatestUpdateError:Object(r.useCallback)((function(t){return e(function(e){return Object($.action)(T.GetLatestError,e)}(t))}),[e])}},te=function(){var e=X(),t=Object(u.g)().push;return{selectProject:function(a){e.selectProject(a),t("/dashboard")}}},ae=a(487),re=function(){var e=function(){var e=Q(),t=e.items,a=e.loading,n=e.error,c=X(),o=c.getProjectRequest,u=c.getProjectSuccess,s=c.getProjectError,l=q().handleError;return Object(r.useEffect)((function(){!function(){var e;v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o(),t.next=4,v.a.awrap(k());case 4:e=t.sent,u(e),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),s(t.t0.message),l("Failed",t.t0.message);case 12:case"end":return t.stop()}}),null,null,[[0,8]],Promise)}()}),[o,u,s,l]),{items:t,loading:a,error:n}}(),t=e.items,a=e.loading,c=te().selectProject;return n.a.createElement("div",{"data-testid":"page-project-list"},n.a.createElement(l.a,{title:"Projects",subTitle:"Show your project list"}),n.a.createElement(E.b,{to:"/project/create"},n.a.createElement(i.a,{type:"primary"},"Create New Project")),n.a.createElement(d.a,{loading:a,active:!0},n.a.createElement(m.a,{gutter:[15,15]},t.map((function(e,t){return n.a.createElement(p.a,{span:6,key:t},n.a.createElement(f.a,{onClick:function(){return c(e)}},n.a.createElement(f.a.Meta,{title:e.name,description:e.createdAt,avatar:n.a.createElement(ae.a,null)})))})))))},ne=a(483),ce=a(486),oe=a(44),ue=function(e){var t=e.name,a=e.label,r=Object(oe.b)({name:t}),c=Object(x.a)(r,2),o=c[0],u=c[1];return n.a.createElement(ne.a.Item,{label:a,hasFeedback:!0,validateStatus:u.error&&"error",help:u.error,htmlFor:t},n.a.createElement(ce.a,Object.assign({},o,{id:t})))},se=a(481),le=a(488),ie=function(e){var t=e.label,a=e.name,c=Object(oe.b)({name:a}),o=Object(x.a)(c,3),u=o[0],s=o[1],l=o[2],d=Object(r.useRef)(null),m=function(){return void 0!==s.error},p=function(){var e;null===(e=d.current)||void 0===e||e.click()},f=function(e){var t=e.target.files&&e.target.files[0];l.setValue(t)};return n.a.createElement(ne.a.Item,{label:t,htmlFor:a},n.a.createElement("input",{id:a,type:"file",ref:d,hidden:!0,onChange:f,onBlur:u.onBlur}),n.a.createElement(i.a,{onClick:p,style:{marginRight:15}},n.a.createElement(le.a,null)," Choose File"),function(){var e=m()?s.error:u.value?u.value.name:"";return n.a.createElement(se.a.Text,{type:m()?"danger":"secondary"},e)}())},de=function(e){var t=e.children,a=Object(oe.c)().handleSubmit;return n.a.createElement(ne.a,{onSubmitCapture:a,layout:"vertical"},t)},me=a(67),pe=me.object().shape({name:me.string().required()}),fe={name:""},Ee=function(){var e=function(){var e=Q(),t=e.loading,a=e.error,r=X(),n=r.createProjectRequest,c=r.createProjectSuccess,o=r.createProjectError,s=q(),l=s.handleSuccess,i=s.handleError,d=Object(u.g)().push;return{createProject:function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(),a.next=4,v.a.awrap(G(e));case 4:t=a.sent,c(t),l("Success","Your project is successfully created"),d("/project"),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),o(a.t0.message),i("Failed",a.t0.message);case 14:case"end":return a.stop()}}),null,null,[[0,10]],Promise)},loading:t,error:a}}(),t=e.createProject,a=e.loading;return n.a.createElement("div",{"data-testid":"page-project-form"},n.a.createElement(l.a,{title:"Create Project",subTitle:"Create your new project"}),n.a.createElement(oe.a,{initialValues:fe,validationSchema:pe,onSubmit:t},n.a.createElement(de,null,n.a.createElement(ue,{name:"name",label:"Name"}),n.a.createElement(i.a,{type:"primary",htmlType:"submit",loading:a},"Submit"))))},be=a(476),ve=function(){return n.a.createElement("div",{"data-testid":"page-project"},n.a.createElement(be.a,{style:{minHeight:"100vh"}},n.a.createElement(be.a.Header,null,"Code Send"),n.a.createElement(be.a,null,n.a.createElement(be.a.Content,{style:{padding:"30px"}},n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/project/list",component:re}),n.a.createElement(u.b,{path:"/project/create",component:Ee}),n.a.createElement(u.b,{render:function(){return n.a.createElement(u.a,{to:"/project/list"})}}))))))},je=a(47),he=a(142),ge=a(491),Oe=a(492),Ce=a(478),ye=a(489),Se=a(477),ke=a(490),Ge=a(260),Re=function(){var e=function(){var e=Z(),t=e.latest,a=e.loading,n=e.error,c=Q(),o=ee(),u=o.getLatestUpdateRequest,s=o.getLatestUpdateSuccess,l=o.getLatestUpdateError,i=q().handleError;return Object(r.useEffect)((function(){!function(){var e,t;v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,u(),a.next=4,v.a.awrap(w((null===(e=c.selected)||void 0===e?void 0:e._id)||""));case 4:t=a.sent,s(t),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),l(a.t0.message),i("Failed",a.t0.message);case 12:case"end":return a.stop()}}),null,null,[[0,8]],Promise)}()}),[u,s,l,i,c.selected]),{latest:t,loading:a,error:n}}(),t=e.latest,a=e.loading;return n.a.createElement("div",{"data-testid":"page-dashboard"},n.a.createElement(l.a,{title:"Latest Update",subTitle:"Show your latest update information"}),n.a.createElement(m.a,{style:{marginTop:15},gutter:16},n.a.createElement(p.a,{span:"8"},n.a.createElement(f.a,null,n.a.createElement(d.a,{avatar:!0,loading:a,active:!0},n.a.createElement(f.a.Meta,{title:"Version",description:null===t||void 0===t?void 0:t.version,avatar:n.a.createElement(ye.a,null)})))),n.a.createElement(p.a,{span:"8"},n.a.createElement(f.a,null,n.a.createElement(d.a,{avatar:!0,loading:a,active:!0},n.a.createElement(f.a.Meta,{title:"Note",description:null===t||void 0===t?void 0:t.note,avatar:n.a.createElement(Se.a,null)})))),n.a.createElement(p.a,{span:"8"},n.a.createElement(f.a,null,n.a.createElement(d.a,{avatar:!0,loading:a,active:!0},n.a.createElement(f.a.Meta,{title:"Release Date",description:null===t||void 0===t?void 0:t.createdAt,avatar:n.a.createElement(ke.a,null)}))))))},we=a(479),Ue=function(){var e=function(){var e=Z(),t=e.items,a=e.loading,n=e.error,c=Q(),o=ee(),u=o.getUpdateRequest,s=o.getUpdateSuccess,l=o.getUpdateError,i=q().handleError;return Object(r.useEffect)((function(){!function(){var e,t;v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,u(),a.next=4,v.a.awrap(R((null===(e=c.selected)||void 0===e?void 0:e._id)||""));case 4:t=a.sent,s(t),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),l(a.t0.message),i("Failed",a.t0.message);case 12:case"end":return a.stop()}}),null,null,[[0,8]],Promise)}()}),[u,s,l,i,c.selected]),{items:t,loading:a,error:n}}(),t=e.items,a=e.loading;return n.a.createElement("div",{"data-testid":"page-update-log"},n.a.createElement(l.a,{title:"Update Logs",subTitle:"Show your update logs"}),n.a.createElement(E.b,{to:"/update/create"},n.a.createElement(i.a,{type:"primary"},"Create New Update")),n.a.createElement(d.a,{loading:a,active:!0},n.a.createElement(we.a,{dataSource:t.map((function(e){return{key:e._id,date:e.createdAt,version:e.version,note:e.note}})),columns:[{title:"Relase Date",dataIndex:"date",key:"date"},{title:"Version",dataIndex:"version",key:"version"},{title:"Note",dataIndex:"note",key:"note"}],style:{marginTop:15},"data-testid":"table-update-log"})))},Pe=me.object().shape({version:me.string().required(),note:me.string().required(),bundle:me.mixed().required()}),Le={version:"",note:""},qe=function(){var e=function(){var e=Z(),t=e.loading,a=e.error,r=Q(),n=ee(),c=n.createUpdateRequest,o=n.createUpdateSuccess,s=n.createUpdateError,l=q(),i=l.handleError,d=l.handleSuccess,m=Object(u.g)().push;return{createUpdate:function(e){var t,a,n,u,l;return v.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.bundle,a=Object(Ge.a)(e,["bundle"]),p.prev=1,c(),p.next=5,v.a.awrap(U((null===(n=r.selected)||void 0===n?void 0:n._id)||"",a));case 5:return l=p.sent,p.next=8,v.a.awrap(P((null===(u=r.selected)||void 0===u?void 0:u._id)||"",l._id,t));case 8:l=p.sent,o(l),d("Success","Your update is successfully created"),m("/update"),p.next=18;break;case 14:p.prev=14,p.t0=p.catch(1),s(p.t0.message),i("Failed",p.t0.message);case 18:case"end":return p.stop()}}),null,null,[[1,14]],Promise)},loading:t,error:a}}(),t=e.createUpdate,a=e.loading;return n.a.createElement("div",{"data-testid":"page-update-form"},n.a.createElement(l.a,{title:"Create Update",subTitle:"Create and realease your new update"}),n.a.createElement(oe.a,{initialValues:Le,validationSchema:Pe,onSubmit:t},n.a.createElement(de,null,n.a.createElement(ue,{name:"version",label:"Version"}),n.a.createElement(ue,{name:"note",label:"Note"}),n.a.createElement(ie,{name:"bundle",label:"Bundle"}),n.a.createElement(i.a,{type:"primary",htmlType:"submit",loading:a},"Submit"))))},xe=function(){return n.a.createElement("div",{"data-testid":"page-update"},n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/update/log",component:Ue}),n.a.createElement(u.b,{path:"/update/create",component:qe}),n.a.createElement(u.b,{render:function(){return n.a.createElement(u.a,{to:"/update/log"})}})))},Ie=[{path:"/dashboard",component:Re,title:"Dashboard",icon:n.a.createElement(ge.a,null)},{path:"/update",component:xe,title:"Update",icon:n.a.createElement(Oe.a,null)}],_e=function(){var e=Q(),t=e.items,a=e.selected,r=te().selectProject,c=n.a.useMemo((function(){return t.findIndex((function(e){return e.name===(null===a||void 0===a?void 0:a.name)})).toString()}),[t,a]);return n.a.createElement(he.a,{overlay:n.a.createElement(je.a,{selectedKeys:[c],"data-testid":"project-selector-button"},t.map((function(e,t){return n.a.createElement(je.a.Item,{key:t,onClick:function(){return r(e)},"data-testid":"project-selector-item"},e.name)})))},n.a.createElement(i.a,null,null===a||void 0===a?void 0:a.name," ",n.a.createElement(Ce.a,null)))},Te=function(){var e=Object(u.g)().location,t=n.a.useMemo((function(){return[Ie.findIndex((function(t){var a=t.path;return e.pathname.includes(a)})).toString()]}),[e.pathname]);return n.a.createElement(je.a,{style:{height:"100%"},selectedKeys:t},Ie.map((function(e,t){var a=e.path,r=e.title,c=e.icon;return n.a.createElement(je.a.Item,{key:t},n.a.createElement(E.b,{to:a},c,r))})))},Fe=function(){return n.a.createElement(u.d,null,Ie.map((function(e,t){var a=e.path,r=e.component;return n.a.createElement(u.b,{key:t,path:a,component:r})})),n.a.createElement(u.a,{to:Ie[0].path}))},Me=function(){return n.a.createElement(be.a,{style:{minHeight:"100vh"}},n.a.createElement(be.a.Header,null,n.a.createElement(_e,null)),n.a.createElement(be.a,null,n.a.createElement(be.a.Sider,null,n.a.createElement(Te,null)),n.a.createElement(be.a.Content,{style:{padding:"30px"}},n.a.createElement(Fe,null))))},Ne=function(){return n.a.createElement(E.a,null,n.a.createElement(Y,null,n.a.createElement(u.d,null,n.a.createElement(u.b,{path:"/project",component:ve}),n.a.createElement(u.b,{path:"/",component:Me}))))};a(472),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[262,1,2]]]);
//# sourceMappingURL=main.334ca1ae.chunk.js.map