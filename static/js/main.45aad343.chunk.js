(this["webpackJsonpcode-send-frontend"]=this["webpackJsonpcode-send-frontend"]||[]).push([[0],{253:function(e,t,a){e.exports=a(408)},408:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(66),c=a.n(l),u=(a(258),a(425)),o=a(426),i=a(52),s=a(40),d=a(422),m=a(423),p=a(417),E=a(163),b=a.n(E),f=a(219),h=a(220),v=a(41),g=a(81),O=a(82),U=a(104),j=a.n(U),C=function(){function e(t){Object(g.a)(this,e),this.baseURL=void 0,this.baseURL=t}return Object(O.a)(e,[{key:"handleError",value:function(e){var t=e.data,a=t.status,n=t.message;return"error"===a?Promise.reject(n):e}},{key:"get",value:function(e){return j.a.get(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}},{key:"post",value:function(e,t){return j.a.post(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"put",value:function(e,t){return j.a.put(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"delete",value:function(e){return j.a.delete(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}}]),e}(),y=Object({NODE_ENV:"production",PUBLIC_URL:"/code-send"}).REACT_APP_CODE_SEND_SERVICE_URL,S=new C(y),w=function(){return S.get("/update")},L=function(){return S.get("/update/latest")},k=function(e){return S.post("/update",e)},R=function(e,t){var a=new FormData;return a.append("bundle",t),S.put("/update/".concat(e,"/bundle"),a)},x=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(),c=Object(v.a)(l,2),u=c[0],o=c[1],i=Object(n.useState)(!1),s=Object(v.a)(i,2),d=s[0],m=s[1],p=Object(n.useState)(),E=Object(v.a)(p,2),b=E[0],f=E[1],h=Object(n.useState)(!1),g=Object(v.a)(h,2);return{updates:a,setUpdates:r,latestUpdate:u,setLatestUpdate:o,loading:d,setLoading:m,error:b,setError:f,success:g[0],setSuccess:g[1]}},F=a(67),D=a.n(F),_=function(){var e=function(){var e=x(),t=e.setLatestUpdate,a=e.setLoading,r=e.setError,l=e.setSuccess,c=e.latestUpdate,u=e.loading,o=e.error,i=e.success;return Object(n.useEffect)((function(){a(!0),L().then((function(e){t(e),l(!0)})).catch((function(e){return r(e.message)})).finally((function(){return a(!1)}))}),[t,a,r,l]),{latestUpdate:c,loading:u,error:o,success:i}}(),t=e.latestUpdate,a=e.loading,l=e.error;return l&&D()({title:"Failed",icon:"error",text:l}),r.a.createElement("div",{"data-testid":"page-dashboard"},a?r.a.createElement(m.a,{active:!0,inverted:!0},r.a.createElement(p.a,{inverted:!0,size:"medium"},"Getting Update")):r.a.createElement(d.a,null,r.a.createElement(d.a.Content,null,r.a.createElement(d.a.Header,null,"Latest Update"),r.a.createElement(d.a.Meta,null,null===t||void 0===t?void 0:t.version),r.a.createElement(d.a.Description,null,null===t||void 0===t?void 0:t.note))))},B=a(421),H=a(409),N=function(){var e=function(){var e=x(),t=e.setUpdates,a=e.setLoading,r=e.setError,l=e.setSuccess,c=e.updates,u=e.loading,o=e.error,i=e.success;return Object(n.useEffect)((function(){a(!0),w().then((function(e){t(e),l(!0)})).catch((function(e){return r(e.message)})).finally((function(){return a(!1)}))}),[t,a,r,l]),{updates:c,loading:u,error:o,success:i}}(),t=e.updates,a=e.loading,l=e.error;return l&&D()({title:"Failed",icon:"error",text:l}),r.a.createElement("div",{"data-testid":"page-update-log"},r.a.createElement(H.a,{as:i.b,to:"/update/create",primary:!0,"data-testid":"button-create-update"},"Create New Update"),a?r.a.createElement(m.a,{active:!0,inverted:!0},r.a.createElement(p.a,{inverted:!0,size:"medium"},"Getting Update")):r.a.createElement(B.a,null,r.a.createElement(B.a.Header,null,r.a.createElement(B.a.Row,null,r.a.createElement(B.a.HeaderCell,null,"No"),r.a.createElement(B.a.HeaderCell,null,"Date"),r.a.createElement(B.a.HeaderCell,null,"Version"),r.a.createElement(B.a.HeaderCell,null,"Note"),r.a.createElement(B.a.HeaderCell,null,"Action"))),r.a.createElement(B.a.Body,{"data-testid":"table-body-update-log"},t.map((function(e,t){return r.a.createElement(B.a.Row,{key:t},r.a.createElement(B.a.Cell,null,t+1),r.a.createElement(B.a.Cell,null,e.createdAt),r.a.createElement(B.a.Cell,null,e.version),r.a.createElement(B.a.Cell,null,e.note),r.a.createElement(B.a.Cell,null,r.a.createElement(H.a,{as:"a",href:e.bundleUrl,basic:!0},"Download")))})))))},I=a(419),V=a(418),z=a(56),A=function(e){var t=e.name,a=e.label,n=Object(z.b)({name:t}),l=Object(v.a)(n,2),c=l[0],u=l[1];return r.a.createElement(I.a.Field,Object.assign({id:t,label:a,control:V.a,error:u.error},c))},P=a(424),q=function(e){var t=e.label,a=e.name,n=Object(z.b)({name:a}),l=Object(v.a)(n,3),c=l[0],u=l[1],o=l[2],i=null,s=function(){return void 0!==u.error},d=function(){i&&i.click()},m=function(e){var t=e.target.files&&e.target.files[0];o.setValue(t)};return r.a.createElement(I.a.Field,{error:s()},r.a.createElement("label",{htmlFor:t},t),r.a.createElement("input",{id:t,type:"file",ref:function(e){return i=e},hidden:!0,onChange:m,onBlur:c.onBlur}),r.a.createElement(H.a,{type:"button",icon:"upload",content:"Choose File",negative:s(),basic:!0,onClick:d,style:{marginRight:10}}),function(){var e=s()?u.error:c.value?c.value.name:"";return e&&r.a.createElement(P.a,{negative:s(),compact:!0,size:"tiny"},e)}())},G=function(e){var t=e.children,a=Object(z.c)().handleSubmit;return r.a.createElement(I.a,{onSubmit:a},t)},J=a(105),W=J.b().shape({version:J.c().required(),note:J.c().required(),bundle:J.a().required()}),M={version:"",note:""},T=function(){var e=Object(s.g)(),t=function(){var e=x(),t=e.setLoading,a=e.setError,n=e.setSuccess,r=e.loading,l=e.error,c=e.success;return{createUpdate:function(){var e=Object(h.a)(b.a.mark((function e(r){var l,c,u,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.bundle,c=Object(f.a)(r,["bundle"]),e.prev=1,t(!0),e.next=5,k(c);case 5:return u=e.sent,o=u._id,e.next=9,R(o,l);case 9:n(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a(e.t0.message);case 15:return e.prev=15,t(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),loading:r,error:l,success:c}}(),a=t.createUpdate,n=t.loading,l=t.error,c=t.success;return l&&D()({title:"Failed",icon:"error",text:l}),c&&(D()({title:"Success",icon:"success",text:"Create update success"}),e.push("/update")),r.a.createElement("div",{"data-testid":"page-update-form"},n?r.a.createElement(m.a,{active:!0,inverted:!0},r.a.createElement(p.a,{inverted:!0,size:"medium"},"Submitting Update")):r.a.createElement(z.a,{initialValues:M,validationSchema:W,onSubmit:a},r.a.createElement(G,null,r.a.createElement(A,{name:"version",label:"Version"}),r.a.createElement(A,{name:"note",label:"Note"}),r.a.createElement(q,{name:"bundle",label:"Bundle"}),r.a.createElement(H.a,{type:"submit",primary:!0},"Submit"))))},$=function(){return r.a.createElement("div",{"data-testid":"page-update"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/update/log",component:N}),r.a.createElement(s.b,{path:"/update/create",component:T}),r.a.createElement(s.b,{render:function(){return r.a.createElement(s.a,{to:"/update/log"})}})))},K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Item,{header:!0},"Code Send")),r.a.createElement(o.a,{columns:2},r.a.createElement(o.a.Column,{width:3},r.a.createElement(u.a,{vertical:!0},r.a.createElement(u.a.Item,{as:i.b,to:"/dashboard","data-testid":"menu-item-dashboard"},"Dashboard"),r.a.createElement(u.a.Item,{as:i.b,to:"/update","data-testid":"menu-item-update"},"Update Log"))),r.a.createElement(o.a.Column,null,r.a.createElement(s.b,{path:"/dashboard",component:_}),r.a.createElement(s.b,{path:"/update",component:$}),r.a.createElement(s.b,{render:function(){return r.a.createElement(s.a,{to:"/dashboard"})}}))))},Q=function(){return r.a.createElement(i.a,null,r.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[253,1,2]]]);
//# sourceMappingURL=main.45aad343.chunk.js.map