(this["webpackJsonpcode-send-frontend"]=this["webpackJsonpcode-send-frontend"]||[]).push([[0],{253:function(e,t,a){e.exports=a(406)},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(66),c=a.n(l),u=(a(257),a(423)),o=a(424),i=a(52),d=a(41),m=a(36),s=a(420),E=a(421),b=a(415),p=a(81),h=a(82),f=a(104),v=a.n(f),g=function(){function e(t){Object(p.a)(this,e),this.baseURL=void 0,this.baseURL=t}return Object(h.a)(e,[{key:"handleError",value:function(e){var t=e.data,a=t.status,n=t.message;return"error"===a?Promise.reject(n):e}},{key:"get",value:function(e){return v.a.get(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}},{key:"post",value:function(e,t){return v.a.post(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"put",value:function(e,t){return v.a.put(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"delete",value:function(e){return v.a.delete(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}}]),e}(),O=Object({NODE_ENV:"production",PUBLIC_URL:"/code-send"}).REACT_APP_CODE_SEND_SERVICE_URL,j=new g(O),C=function(){return j.get("/update")},y=function(){return j.get("/update/latest")},w=function(e){return j.post("/update",e)},U=function(e,t){var a=new FormData;return a.append("bundle",t),j.put("/update/".concat(e,"/bundle"),a)},S=a(67),k=a.n(S),R=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),u=Object(m.a)(c,2),o=u[0],i=u[1];Object(n.useEffect)((function(){i(!0),y().then((function(e){return l(e)})).catch((function(e){return k()({title:"Failed",text:e.message,icon:"error"})})).finally((function(){return i(!1)}))}),[]);return r.a.createElement("div",{"data-testid":"page-dashboard"},o?r.a.createElement(E.a,{active:!0,inverted:!0},r.a.createElement(b.a,{inverted:!0,size:"medium"},"Getting Update")):r.a.createElement(s.a,null,r.a.createElement(s.a.Content,null,r.a.createElement(s.a.Header,null,"Latest Update"),r.a.createElement(s.a.Meta,null,null===a||void 0===a?void 0:a.version),r.a.createElement(s.a.Description,null,null===a||void 0===a?void 0:a.note))))},L=a(419),x=a(407),F=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),u=Object(m.a)(c,2),o=u[0],d=u[1];Object(n.useEffect)((function(){d(!0),C().then((function(e){return l(e)})).catch((function(e){return k()({title:"Failed",text:e.message,icon:"error"})})).finally((function(){return d(!1)}))}),[]);return r.a.createElement("div",{"data-testid":"page-update-log"},r.a.createElement(x.a,{as:i.b,to:"/update/create",primary:!0,"data-testid":"button-create-update"},"Create New Update"),o?r.a.createElement(E.a,{active:!0,inverted:!0},r.a.createElement(b.a,{inverted:!0,size:"medium"},"Getting Update")):r.a.createElement(L.a,null,r.a.createElement(L.a.Header,null,r.a.createElement(L.a.Row,null,r.a.createElement(L.a.HeaderCell,null,"No"),r.a.createElement(L.a.HeaderCell,null,"Date"),r.a.createElement(L.a.HeaderCell,null,"Version"),r.a.createElement(L.a.HeaderCell,null,"Note"),r.a.createElement(L.a.HeaderCell,null,"Action"))),r.a.createElement(L.a.Body,{"data-testid":"table-body-update-log"},a.map((function(e,t){return r.a.createElement(L.a.Row,{key:t},r.a.createElement(L.a.Cell,null,t+1),r.a.createElement(L.a.Cell,null,e.createdAt),r.a.createElement(L.a.Cell,null,e.version),r.a.createElement(L.a.Cell,null,e.note),r.a.createElement(L.a.Cell,null,r.a.createElement(x.a,{as:"a",href:e.bundleUrl,basic:!0},"Download")))})))))},D=a(167),_=a.n(D),B=a(225),H=a(226),N=a(417),I=a(416),V=a(56),z=function(e){var t=e.name,a=e.label,n=Object(V.b)({name:t}),l=Object(m.a)(n,2),c=l[0],u=l[1];return r.a.createElement(N.a.Field,Object.assign({id:t,label:a,control:I.a,error:u.error},c))},A=a(422),P=function(e){var t=e.label,a=e.name,n=Object(V.b)({name:a}),l=Object(m.a)(n,3),c=l[0],u=l[1],o=l[2],i=null,d=function(){return void 0!==u.error},s=function(){i&&i.click()},E=function(e){var t=e.target.files&&e.target.files[0];o.setValue(t)};return r.a.createElement(N.a.Field,{error:d()},r.a.createElement("label",{htmlFor:t},t),r.a.createElement("input",{id:t,type:"file",ref:function(e){return i=e},hidden:!0,onChange:E,onBlur:c.onBlur}),r.a.createElement(x.a,{type:"button",icon:"upload",content:"Choose File",negative:d(),basic:!0,onClick:s,style:{marginRight:10}}),function(){var e=d()?u.error:c.value?c.value.name:"";return e&&r.a.createElement(A.a,{negative:d(),compact:!0,size:"tiny"},e)}())},q=function(e){var t=e.children,a=Object(V.c)().handleSubmit;return r.a.createElement(N.a,{onSubmit:a},t)},G=a(105),J=G.b().shape({version:G.c().required(),note:G.c().required(),bundle:G.a().required()}),W={version:"",note:""},M=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(d.g)(),u=function(){var e=Object(H.a)(_.a.mark((function e(t){var a,n,r,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.bundle,n=Object(B.a)(t,["bundle"]),e.prev=1,l(!0),e.next=5,w(n);case 5:return r=e.sent,u=r._id,e.next=9,U(u,a);case 9:k()({title:"Success",text:"Update Created",icon:"success"}),c.push("/update"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),k()({title:"Failed",text:e.t0.message,icon:"error"});case 16:return e.prev=16,l(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{"data-testid":"page-update-form"},a?r.a.createElement(E.a,{active:!0,inverted:!0},r.a.createElement(b.a,{inverted:!0,size:"medium"},"Submitting Update")):r.a.createElement(V.a,{initialValues:W,validationSchema:J,onSubmit:u},r.a.createElement(q,null,r.a.createElement(z,{name:"version",label:"Version"}),r.a.createElement(z,{name:"note",label:"Note"}),r.a.createElement(P,{name:"bundle",label:"Bundle"}),r.a.createElement(x.a,{type:"submit",primary:!0},"Submit"))))},T=function(){return r.a.createElement("div",{"data-testid":"page-update"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/update/log",component:F}),r.a.createElement(d.b,{path:"/update/create",component:M}),r.a.createElement(d.b,{render:function(){return r.a.createElement(d.a,{to:"/update/log"})}})))},$=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Item,{header:!0},"Code Send")),r.a.createElement(o.a,{columns:2},r.a.createElement(o.a.Column,{width:3},r.a.createElement(u.a,{vertical:!0},r.a.createElement(u.a.Item,{as:i.b,to:"/dashboard","data-testid":"menu-item-dashboard"},"Dashboard"),r.a.createElement(u.a.Item,{as:i.b,to:"/update","data-testid":"menu-item-update"},"Update Log"))),r.a.createElement(o.a.Column,null,r.a.createElement(d.b,{path:"/dashboard",component:R}),r.a.createElement(d.b,{path:"/update",component:T}),r.a.createElement(d.b,{render:function(){return r.a.createElement(d.a,{to:"/dashboard"})}}))))},K=function(){return r.a.createElement(i.a,null,r.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[253,1,2]]]);
//# sourceMappingURL=main.cebed564.chunk.js.map