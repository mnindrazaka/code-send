(this["webpackJsonpcode-send-frontend"]=this["webpackJsonpcode-send-frontend"]||[]).push([[0],{276:function(e,t,a){e.exports=a(491)},491:function(e,t,a){"use strict";a.r(t);var r,n=a(0),c=a.n(n),u=a(9),o=a.n(u),l=a(27),s=a(83),i=a(499),d=a(96),p=a(496),m=a(122),E=a(48),f=a(494),b=a(44),j=a.n(b),v=a(94),h=a(232),g=a(233),O=a(137),C=a.n(O),S=function(){function e(t){Object(h.a)(this,e),this.baseURL=void 0,this.baseURL=t}return Object(g.a)(e,[{key:"handleError",value:function(e){var t=e.data,a=t.status,r=t.message;return"error"===a?Promise.reject(r):e}},{key:"get",value:function(e){return C.a.get(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}},{key:"post",value:function(e,t){return C.a.post(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"put",value:function(e,t){return C.a.put(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"delete",value:function(e){return C.a.delete(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}}]),e}(),y=Object({NODE_ENV:"production",PUBLIC_URL:"/code-send"}).REACT_APP_CODE_SEND_SERVICE_URL,k=new S(y),R=function(){return k.get("/project")},U=function(e){return k.post("/project",e)},G=function(e){return k.get("/project/".concat(e,"/update"))},w=function(e){return k.get("/project/".concat(e,"/update/latest"))},P=function(e,t){return k.post("/project/".concat(e,"/update"),t)},q=function(e,t,a){var r=new FormData;return r.append("bundle",a),k.put("/project/".concat(e,"/update/").concat(t,"/bundle"),r)},L=a(498),x=function(){return{handleSuccess:Object(n.useCallback)((function(e,t){L.a.success({message:e,description:t})}),[]),handleError:Object(n.useCallback)((function(e,t){L.a.error({message:e,description:t})}),[])}},_=a(273),T=a(55),N=function(e){var t=Object.keys(e),a=Object.values(e),r=new Map,n=new Map;return t.forEach((function(e,t){r.set(e,a[t][1])})),a.forEach((function(e,a){n.set(t[a],e[0])})),[function(e,a){var r,c=!1,u=new Map;return t.forEach((function(t){var o=n.get(t),l=e[t];r=o(l,a),c=c||r!==l,u.set(t,r)})),c?Object.fromEntries(u):e},Object.fromEntries(r)]},F=a(121);!function(e){e.GetRequest="@Project/GetRequest",e.GetSuccess="@Project/GetSuccess",e.GetError="@Project/GetError",e.CreateRequest="@Project/CreateRequest",e.CreateSuccess="@Project/CreateSuccess",e.CreateError="@Project/CreateError",e.Select="@Project/Select"}(r||(r={}));var I,M={items:[],selected:void 0,loading:!1,error:void 0},D=N({items:[function(e,t){var a=t.type,n=t.payload;switch(a){case r.GetSuccess:return Object(F.a)(n);case r.CreateSuccess:return[].concat(Object(F.a)(e),[n]);default:return e}},M.items],selected:[function(e,t){var a=t.type,n=t.payload;switch(a){case r.Select:return n;default:return e}},M.selected],loading:[function(e,t){switch(t.type){case r.GetRequest:case r.CreateRequest:return!0;case r.GetSuccess:case r.GetError:case r.CreateSuccess:case r.CreateError:return!1;default:return e}},M.loading],error:[function(e,t){var a=t.type,n=t.payload;switch(a){case r.GetError:case r.CreateError:return n;case r.GetSuccess:case r.CreateSuccess:return;default:return e}},M.error]});!function(e){e.GetRequest="@Update/GetRequest",e.GetSuccess="@Update/GetSuccess",e.GetError="@Update/GetError",e.CreateRequest="@Update/CreateRequest",e.CreateSuccess="@Update/CreateSuccess",e.CreateError="@Update/CreateError",e.GetLatestRequest="@Update/GetLatestRequest",e.GetLatestSuccess="@Update/GetLatestSuccess",e.GetLatestError="@Update/GetLatestError"}(I||(I={}));var V={items:[],latest:void 0,loading:!1,error:void 0},B=N({items:[function(e,t){var a=t.type,r=t.payload;switch(a){case I.GetSuccess:return Object(F.a)(r);case I.CreateSuccess:return[].concat(Object(F.a)(e),[r]);default:return e}},V.items],latest:[function(e,t){var a=t.type,r=t.payload;switch(a){case I.GetLatestSuccess:return r;default:return e}},V.latest],loading:[function(e,t){switch(t.type){case I.GetRequest:case I.CreateRequest:case I.GetLatestRequest:return!0;case I.GetSuccess:case I.GetError:case I.CreateSuccess:case I.CreateError:case I.GetLatestSuccess:case I.GetLatestError:return!1;default:return e}},V.loading],error:[function(e,t){var a=t.type,r=t.payload;switch(a){case I.GetError:case I.CreateError:case I.GetLatestError:return r;case I.GetSuccess:case I.CreateSuccess:case I.GetLatestSuccess:return;default:return e}},V.error]}),A=Object(T.a)(D,2),H=A[0],W=A[1],Y=Object(T.a)(B,2),J=N({project:[H,W],update:[Y[0],Y[1]]}),z=Object(n.createContext)({state:{project:M,update:V},dispatch:function(){return null}}),K=z.Provider,$=function(e){var t=e.children,a=e.initialState,r=Object(T.a)(J,2),u=r[0],o=r[1],l=Object(n.useReducer)(u,o),s=Object(T.a)(l,2),i=s[0],d=s[1],p={state:Object(_.a)({},i,{},a),dispatch:d};return c.a.createElement(K,{value:p},t)},Q=a(22),X=function(){return Object(n.useContext)(z)},Z=function(){return X().state.project},ee=function(){var e=X().dispatch;return{getProjectRequest:Object(n.useCallback)((function(){return e(Object(Q.action)(r.GetRequest))}),[e]),getProjectSuccess:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(r.GetSuccess,e)}(t))}),[e]),getProjectError:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(r.GetError,e)}(t))}),[e]),createProjectRequest:Object(n.useCallback)((function(){return e(Object(Q.action)(r.CreateRequest))}),[e]),createProjectSuccess:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(r.CreateSuccess,e)}(t))}),[e]),createProjectError:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(r.CreateError,e)}(t))}),[e]),selectProject:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(r.Select,e)}(t))}),[e])}},te=function(){return X().state.update},ae=function(){var e=X().dispatch;return{getUpdateRequest:Object(n.useCallback)((function(){return e(Object(Q.action)(I.GetRequest))}),[e]),getUpdateSuccess:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(I.GetSuccess,e)}(t))}),[e]),getUpdateError:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(I.GetError,e)}(t))}),[e]),createUpdateRequest:Object(n.useCallback)((function(){return e(Object(Q.action)(I.CreateRequest))}),[e]),createUpdateSuccess:Object(n.useCallback)((function(t){return e((a=t,Object(Q.action)(I.CreateSuccess,a)));var a}),[e]),createUpdateError:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(I.CreateError,e)}(t))}),[e]),getLatestUpdateRequest:Object(n.useCallback)((function(){return e(Object(Q.action)(I.GetLatestRequest))}),[e]),getLatestUpdateSuccess:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(I.GetLatestSuccess,e)}(t))}),[e]),getLatestUpdateError:Object(n.useCallback)((function(t){return e(function(e){return Object(Q.action)(I.GetLatestError,e)}(t))}),[e])}},re=function(){var e=ee(),t=Object(s.g)().push;return{selectProject:function(a){e.selectProject(a),t("/dashboard")}}},ne=a(502),ce=function(e){var t=e.children;return c.a.createElement("div",{style:{paddingLeft:24,paddingRight:24}},t)},ue=a(242),oe=a.n(ue),le=function(e){return oe()(e).format("L")},se=function(){var e=function(){var e=Z(),t=e.items,a=e.loading,r=e.error,c=ee(),u=c.getProjectRequest,o=c.getProjectSuccess,l=c.getProjectError,s=x().handleError;return Object(n.useEffect)((function(){Object(v.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(),e.next=4,R();case 4:t=e.sent,o(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),l(e.t0.message),s("Failed",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[u,o,l,s]),{items:t,loading:a,error:r}}(),t=e.items,a=e.loading,r=re().selectProject;return c.a.createElement("div",{"data-testid":"page-project-list"},c.a.createElement(i.a,{title:"Projects",subTitle:"Show your project list"}),c.a.createElement(ce,null,c.a.createElement(l.b,{to:"/project/create"},c.a.createElement(d.a,{type:"primary"},"Create New Project")),c.a.createElement(p.a,{loading:a,active:!0},c.a.createElement(m.a,{style:{marginTop:15},gutter:[15,15]},t.map((function(e,t){return c.a.createElement(E.a,{span:6,key:t},c.a.createElement(f.a,{onClick:function(){return r(e)},style:{cursor:"pointer"}},c.a.createElement(f.a.Meta,{title:e.name,description:le(e.createdAt),avatar:c.a.createElement(ne.a,{style:{fontSize:30}})})))}))))))},ie=a(497),de=a(500),pe=a(52),me=function(e){var t=e.name,a=e.label,r=Object(pe.b)({name:t}),n=Object(T.a)(r,2),u=n[0],o=n[1];return c.a.createElement(ie.a.Item,{label:a,hasFeedback:!0,validateStatus:o.error&&"error",help:o.error,htmlFor:t},c.a.createElement(de.a,Object.assign({},u,{id:t})))},Ee=a(495),fe=a(503),be=function(e){var t=e.label,a=e.name,r=Object(pe.b)({name:a}),u=Object(T.a)(r,3),o=u[0],l=u[1],s=u[2],i=Object(n.useRef)(null),p=function(){return void 0!==l.error},m=function(){var e;null===(e=i.current)||void 0===e||e.click()},E=function(e){var t=e.target.files&&e.target.files[0];s.setValue(t)};return c.a.createElement(ie.a.Item,{label:t,htmlFor:a},c.a.createElement("input",{id:a,type:"file",ref:i,hidden:!0,onChange:E,onBlur:o.onBlur}),c.a.createElement(d.a,{onClick:m,style:{marginRight:15}},c.a.createElement(fe.a,null)," Choose File"),function(){var e=p()?l.error:o.value?o.value.name:"";return c.a.createElement(Ee.a.Text,{type:p()?"danger":"secondary"},e)}())},je=function(e){var t=e.children,a=Object(pe.c)().handleSubmit;return c.a.createElement(ie.a,{onSubmitCapture:a,layout:"vertical"},t)},ve=a(84),he=ve.b().shape({name:ve.c().required()}),ge={name:""},Oe=function(){var e=function(){var e=Z(),t=e.loading,a=e.error,r=ee(),n=r.createProjectRequest,c=r.createProjectSuccess,u=r.createProjectError,o=x(),l=o.handleSuccess,i=o.handleError,d=Object(s.g)().push;return{createProject:function(){var e=Object(v.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(),e.next=4,U(t);case 4:a=e.sent,c(a),l("Success","Your project is successfully created"),d("/project"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u(e.t0.message),i("Failed",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),loading:t,error:a}}(),t=e.createProject,a=e.loading;return c.a.createElement("div",{"data-testid":"page-project-form"},c.a.createElement(i.a,{title:"Create Project",subTitle:"Create your new project"}),c.a.createElement(ce,null,c.a.createElement(pe.a,{initialValues:ge,validationSchema:he,onSubmit:t},c.a.createElement(je,null,c.a.createElement(me,{name:"name",label:"Name"}),c.a.createElement(d.a,{type:"primary",htmlType:"submit",loading:a},"Submit")))))},Ce=a(492),Se=function(){return c.a.createElement("div",{"data-testid":"page-project"},c.a.createElement(Ce.a,{style:{minHeight:"100vh"}},c.a.createElement(Ce.a.Header,null,c.a.createElement(m.a,{justify:"space-between"},c.a.createElement(E.a,null,c.a.createElement(l.b,{to:"/project"},c.a.createElement(Ee.a.Text,{strong:!0,style:{color:"white"}},"Code Send"))))),c.a.createElement(Ce.a,null,c.a.createElement(Ce.a.Content,{style:{padding:"30px"}},c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/project/list",component:se}),c.a.createElement(s.b,{path:"/project/create",component:Oe}),c.a.createElement(s.b,{render:function(){return c.a.createElement(s.a,{to:"/project/list"})}}))))))},ye=a(135),ke=a(56),Re=a(508),Ue=a(509),Ge=a(501),we=a(504),Pe=a(505),qe=a(506),Le=a(507),xe=a(274),_e=function(){var e=function(){var e=te(),t=e.latest,a=e.loading,r=e.error,c=Z(),u=ae(),o=u.getLatestUpdateRequest,l=u.getLatestUpdateSuccess,s=u.getLatestUpdateError,i=x().handleError;return Object(n.useEffect)((function(){Object(v.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(),e.next=4,w((null===(t=c.selected)||void 0===t?void 0:t._id)||"");case 4:a=e.sent,l(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),s(e.t0.message),i("Failed",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[o,l,s,i,c.selected]),{latest:t,loading:a,error:r}}(),t=e.latest,a=e.loading;return c.a.createElement("div",{"data-testid":"page-dashboard"},c.a.createElement(i.a,{title:"Latest Update",subTitle:"Show your latest update information",backIcon:!0}),c.a.createElement(ce,null,t?c.a.createElement(m.a,{gutter:16},c.a.createElement(E.a,{span:"8"},c.a.createElement(f.a,null,c.a.createElement(p.a,{avatar:!0,loading:a,active:!0},c.a.createElement(f.a.Meta,{title:"Version",description:t.version,avatar:c.a.createElement(we.a,null)})))),c.a.createElement(E.a,{span:"8"},c.a.createElement(f.a,null,c.a.createElement(p.a,{avatar:!0,loading:a,active:!0},c.a.createElement(f.a.Meta,{title:"Note",description:t.note,avatar:c.a.createElement(Pe.a,null)})))),c.a.createElement(E.a,{span:"8"},c.a.createElement(f.a,null,c.a.createElement(p.a,{avatar:!0,loading:a,active:!0},c.a.createElement(f.a.Meta,{title:"Release Date",description:le(t.createdAt),avatar:c.a.createElement(qe.a,null)}))))):c.a.createElement(f.a,null,c.a.createElement(Ge.a,{icon:c.a.createElement(Le.a,null),title:"You Have No Update !",subTitle:"Create one and start developing your application",extra:c.a.createElement(l.b,{to:"/update/create"},c.a.createElement(d.a,{type:"primary"},"Create Update Now"))}))))},Te=a(493),Ne=function(){var e=function(){var e=te(),t=e.items,a=e.loading,r=e.error,c=Z(),u=ae(),o=u.getUpdateRequest,l=u.getUpdateSuccess,s=u.getUpdateError,i=x().handleError;return Object(n.useEffect)((function(){Object(v.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(),e.next=4,G((null===(t=c.selected)||void 0===t?void 0:t._id)||"");case 4:a=e.sent,l(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),s(e.t0.message),i("Failed",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[o,l,s,i,c.selected]),{items:t,loading:a,error:r}}(),t=e.items,a=e.loading,r=Object(n.useMemo)((function(){return[{title:"Relase Date",render:function(e,t){return c.a.createElement("span",null,le(t.createdAt))}},{title:"Version",dataIndex:"version"},{title:"Note",dataIndex:"note"},{title:"",render:function(e,t){return c.a.createElement(d.a,{href:t.bundleUrl},"Download Bundle")}}]}),[]);return c.a.createElement("div",{"data-testid":"page-update-log"},c.a.createElement(i.a,{title:"Update Logs",subTitle:"Show your update logs"}),c.a.createElement(ce,null,c.a.createElement(l.b,{to:"/update/create"},c.a.createElement(d.a,{type:"primary"},"Create New Update")),c.a.createElement(Te.a,{dataSource:t,columns:r,style:{marginTop:15},"data-testid":"table-update-log",loading:a})))},Fe=ve.b().shape({version:ve.c().required(),note:ve.c().required(),bundle:ve.a().required()}),Ie={version:"",note:""},Me=function(){var e=function(){var e=te(),t=e.loading,a=e.error,r=Z(),n=ae(),c=n.createUpdateRequest,u=n.createUpdateSuccess,o=n.createUpdateError,l=x(),i=l.handleError,d=l.handleSuccess,p=Object(s.g)().push;return{createUpdate:function(){var e=Object(v.a)(j.a.mark((function e(t){var a,n,l,s,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.bundle,n=Object(xe.a)(t,["bundle"]),e.prev=1,c(),e.next=5,P((null===(l=r.selected)||void 0===l?void 0:l._id)||"",n);case 5:return m=e.sent,e.next=8,q((null===(s=r.selected)||void 0===s?void 0:s._id)||"",m._id,a);case 8:m=e.sent,u(m),d("Success","Your update is successfully created"),p("/update"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),o(e.t0.message),i("Failed",e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),loading:t,error:a}}(),t=e.createUpdate,a=e.loading;return c.a.createElement("div",{"data-testid":"page-update-form"},c.a.createElement(i.a,{title:"Create Update",subTitle:"Create and realease your new update"}),c.a.createElement(ce,null,c.a.createElement(pe.a,{initialValues:Ie,validationSchema:Fe,onSubmit:t},c.a.createElement(je,null,c.a.createElement(me,{name:"version",label:"Version"}),c.a.createElement(me,{name:"note",label:"Note"}),c.a.createElement(be,{name:"bundle",label:"Bundle"}),c.a.createElement(d.a,{type:"primary",htmlType:"submit",loading:a},"Submit")))))},De=function(){return c.a.createElement("div",{"data-testid":"page-update"},c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/update/log",component:Ne}),c.a.createElement(s.b,{path:"/update/create",component:Me}),c.a.createElement(s.b,{render:function(){return c.a.createElement(s.a,{to:"/update/log"})}})))},Ve=[{path:"/dashboard",component:_e,title:"Dashboard",icon:c.a.createElement(Re.a,null)},{path:"/update",component:De,title:"Update",icon:c.a.createElement(Ue.a,null)}],Be=function(){var e=Z(),t=e.items,a=e.selected,r=re().selectProject;return c.a.createElement(ye.a,{placeholder:"Select Project",value:null===a||void 0===a?void 0:a._id,onChange:function(e){var a=t.find((function(t){return t._id===e}));a&&r(a)},style:{minWidth:130}},t.map((function(e,t){return c.a.createElement(ye.a.Option,{key:t,value:e._id},e.name)})))},Ae=function(){var e=Object(s.g)().location,t=c.a.useMemo((function(){return[Ve.findIndex((function(t){var a=t.path;return e.pathname.includes(a)})).toString()]}),[e.pathname]);return c.a.createElement(ke.a,{style:{height:"100%"},selectedKeys:t},Ve.map((function(e,t){var a=e.path,r=e.title,n=e.icon;return c.a.createElement(ke.a.Item,{key:t},c.a.createElement(l.b,{to:a},n,r))})))},He=function(){return c.a.createElement(s.d,null,Ve.map((function(e,t){var a=e.path,r=e.component;return c.a.createElement(s.b,{key:t,path:a,component:r})})),c.a.createElement(s.a,{to:Ve[0].path}))},We=function(){return Z().selected?c.a.createElement(Ce.a,{style:{minHeight:"100vh"}},c.a.createElement(Ce.a.Header,null,c.a.createElement(m.a,{justify:"space-between"},c.a.createElement(E.a,null,c.a.createElement(l.b,{to:"/project"},c.a.createElement(Ee.a.Text,{strong:!0,style:{color:"white"}},"Code Send"))),c.a.createElement(E.a,null,c.a.createElement(Be,null)))),c.a.createElement(Ce.a,null,c.a.createElement(Ce.a.Sider,null,c.a.createElement(Ae,null)),c.a.createElement(Ce.a.Content,null,c.a.createElement(He,null)))):c.a.createElement(s.a,{to:"/project"})},Ye=function(){return c.a.createElement(l.a,null,c.a.createElement($,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/project",component:Se}),c.a.createElement(s.b,{path:"/",component:We}))))};a(490),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[276,1,2]]]);
//# sourceMappingURL=main.431cd672.chunk.js.map