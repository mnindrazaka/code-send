(this["webpackJsonpcode-send-frontend"]=this["webpackJsonpcode-send-frontend"]||[]).push([[0],{235:function(e,t,a){e.exports=a(387)},387:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=a(389),s=a(52),u=a(409),i=a(410),d=a(68),m=a(51),p=a(395),E=a(116),b=a(47),h=a(391),v=a(396),f=a(403),g=a(399),O=a(404),j=a(99),y=a(33),S=a.n(y),k=a(79),U=a(32),w=a(65),L=a(100),x=a(128),I=a.n(x),C=function(){function e(t){Object(w.a)(this,e),this.baseURL=void 0,this.baseURL=t}return Object(L.a)(e,[{key:"handleError",value:function(e){var t=e.data,a=t.status,n=t.message;return"error"===a?Promise.reject(n):e}},{key:"get",value:function(e){return I.a.get(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}},{key:"post",value:function(e,t){return I.a.post(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"put",value:function(e,t){return I.a.put(this.baseURL+e,t).then(this.handleError).then((function(e){return e.data}))}},{key:"delete",value:function(e){return I.a.delete(this.baseURL+e).then(this.handleError).then((function(e){return e.data}))}}]),e}(),R=Object({NODE_ENV:"production",PUBLIC_URL:"/code-send"}).REACT_APP_CODE_SEND_SERVICE_URL,_=new C(R),F=function(){return _.get("/update")},T=function(){return _.get("/update/latest")},D=function(e){return _.post("/update",e)},N=function(e,t){var a=new FormData;return a.append("bundle",t),_.put("/update/".concat(e,"/bundle"),a)},V=a(393),B=function(){var e=Object(n.useState)([]),t=Object(U.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),l=Object(U.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(!1),i=Object(U.a)(u,2),d=i[0],m=i[1],p=Object(n.useState)(),E=Object(U.a)(p,2),b=E[0],h=E[1],v=Object(n.useState)(!1),f=Object(U.a)(v,2);return{updates:a,setUpdates:r,latestUpdate:o,setLatestUpdate:s,loading:d,setLoading:m,error:b,setError:h,success:f[0],setSuccess:f[1],handleSuccessIndicator:Object(n.useCallback)((function(e,t){V.a.success({message:e,description:t})}),[]),handleErrorIndicator:Object(n.useCallback)((function(e,t){V.a.error({message:e,description:t})}),[])}},A=function(){var e=function(){var e=B(),t=e.setLatestUpdate,a=e.setLoading,r=e.setError,c=e.setSuccess,l=e.latestUpdate,o=e.loading,s=e.error,u=e.success,i=e.handleErrorIndicator;return Object(n.useEffect)((function(){Object(k.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,T();case 4:n=e.sent,t(n),c(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(e.t0.message),i("Failed",e.t0.message);case 13:return e.prev=13,a(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})))()}),[a,t,c,r,i]),{latestUpdate:l,loading:o,error:s,success:u}}(),t=e.latestUpdate,a=e.loading;return r.a.createElement("div",{"data-testid":"page-dashboard"},r.a.createElement(p.a,{title:"Latest Update",subTitle:"Show your latest update information"}),r.a.createElement(E.a,{style:{marginTop:15},gutter:16},r.a.createElement(b.a,{span:"8"},r.a.createElement(h.a,null,r.a.createElement(v.a,{avatar:!0,loading:a,active:!0},r.a.createElement(h.a.Meta,{title:"Version",description:null===t||void 0===t?void 0:t.version,avatar:r.a.createElement(f.a,null)})))),r.a.createElement(b.a,{span:"8"},r.a.createElement(h.a,null,r.a.createElement(v.a,{avatar:!0,loading:a,active:!0},r.a.createElement(h.a.Meta,{title:"Note",description:null===t||void 0===t?void 0:t.note,avatar:r.a.createElement(g.a,null)})))),r.a.createElement(b.a,{span:"8"},r.a.createElement(h.a,null,r.a.createElement(v.a,{avatar:!0,loading:a,active:!0},r.a.createElement(h.a.Meta,{title:"Release Date",description:null===t||void 0===t?void 0:t.createdAt,avatar:r.a.createElement(O.a,null)}))))))},P=a(91),q=a(390),M=function(){var e=function(){var e=B(),t=e.setUpdates,a=e.setLoading,r=e.setError,c=e.setSuccess,l=e.updates,o=e.loading,s=e.error,u=e.success,i=e.handleErrorIndicator;return Object(n.useEffect)((function(){Object(k.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,F();case 4:n=e.sent,t(n),c(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(e.t0.message),i("Failed",e.t0.message);case 13:return e.prev=13,a(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})))()}),[t,a,r,c,i]),{updates:l,loading:o,error:s,success:u}}(),t=e.updates,a=e.loading;return r.a.createElement("div",{"data-testid":"page-update-log"},r.a.createElement(p.a,{title:"Update Logs",subTitle:"Show your update logs"}),r.a.createElement(d.b,{to:"/update/create"},r.a.createElement(P.a,{type:"primary"},"Create New Update")),r.a.createElement(v.a,{loading:a,active:!0},r.a.createElement(q.a,{dataSource:t.map((function(e){return{key:e._id,date:e.createdAt,version:e.version,note:e.note}})),columns:[{title:"Relase Date",dataIndex:"date",key:"date"},{title:"Version",dataIndex:"version",key:"version"},{title:"Note",dataIndex:"note",key:"note"}],style:{marginTop:15},"data-testid":"table-update-log"})))},H=a(394),J=a(397),W=a(74),Y=function(e){var t=e.name,a=e.label,n=Object(W.b)({name:t}),c=Object(U.a)(n,2),l=c[0],o=c[1];return r.a.createElement(H.a.Item,{label:a,hasFeedback:!0,validateStatus:o.error&&"error",help:o.error,htmlFor:t},r.a.createElement(J.a,Object.assign({},l,{id:t})))},$=a(392),z=a(408),G=function(e){var t=e.label,a=e.name,c=Object(W.b)({name:a}),l=Object(U.a)(c,3),o=l[0],s=l[1],u=l[2],i=Object(n.useRef)(null),d=function(){return void 0!==s.error},m=function(){var e;null===(e=i.current)||void 0===e||e.click()},p=function(e){var t=e.target.files&&e.target.files[0];u.setValue(t)};return r.a.createElement(H.a.Item,{label:t,htmlFor:a},r.a.createElement("input",{id:a,type:"file",ref:i,hidden:!0,onChange:p,onBlur:o.onBlur}),r.a.createElement(P.a,{onClick:m,style:{marginRight:15}},r.a.createElement(z.a,null)," Choose File"),function(){var e=d()?s.error:o.value?o.value.name:"";return r.a.createElement($.a.Text,{type:d()?"danger":"secondary"},e)}())},K=function(e){var t=e.children,a=Object(W.c)().handleSubmit;return r.a.createElement(H.a,{onSubmitCapture:a,layout:"vertical"},t)},Q=a(129),X=Q.b().shape({version:Q.c().required(),note:Q.c().required(),bundle:Q.a().required()}),Z={version:"",note:""},ee=function(){var e=Object(m.g)(),t=function(){var e=B(),t=e.setLoading,a=e.setError,n=e.setSuccess,r=e.loading,c=e.error,l=e.success,o=e.handleSuccessIndicator,s=e.handleErrorIndicator;return{createUpdate:function(){var e=Object(k.a)(S.a.mark((function e(r){var c,l,u,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.bundle,l=Object(j.a)(r,["bundle"]),e.prev=1,t(!0),e.next=5,D(l);case 5:return u=e.sent,i=u._id,e.next=9,N(i,c);case 9:n(!0),o("Success","Your update is successfully created"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a(e.t0.message),s("Failed",e.t0.message);case 17:return e.prev=17,t(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),loading:r,error:c,success:l}}(),a=t.createUpdate,c=t.loading,l=t.success;return Object(n.useEffect)((function(){l&&e.push("/update")}),[l,e]),r.a.createElement("div",{"data-testid":"page-update-form"},r.a.createElement(p.a,{title:"Create Update",subTitle:"Create and realease your new update"}),r.a.createElement(W.a,{initialValues:Z,validationSchema:X,onSubmit:a},r.a.createElement(K,null,r.a.createElement(Y,{name:"version",label:"Version"}),r.a.createElement(Y,{name:"note",label:"Note"}),r.a.createElement(G,{name:"bundle",label:"Bundle"}),r.a.createElement(P.a,{type:"primary",htmlType:"submit",loading:c},"Submit"))))},te=function(){return r.a.createElement("div",{"data-testid":"page-update"},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/update/log",component:M}),r.a.createElement(m.b,{path:"/update/create",component:ee}),r.a.createElement(m.b,{render:function(){return r.a.createElement(m.a,{to:"/update/log"})}})))},ae=function(){return r.a.createElement(o.a,{style:{minHeight:"100vh"}},r.a.createElement(o.a.Header,null,"Code Send"),r.a.createElement(o.a,null,r.a.createElement(o.a.Sider,null,r.a.createElement(s.a,{style:{height:"100%"}},r.a.createElement(s.a.Item,null,r.a.createElement(d.b,{to:"/dashboard"},r.a.createElement(u.a,null),"Dashboard")),r.a.createElement(s.a.Item,null,r.a.createElement(d.b,{to:"/update"},r.a.createElement(i.a,null),"Update")))),r.a.createElement(o.a.Content,{style:{padding:"30px"}},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/dashboard",component:A}),r.a.createElement(m.b,{path:"/update",component:te}),r.a.createElement(m.a,{to:"/dashboard"})))))},ne=function(){return r.a.createElement(d.a,null,r.a.createElement(ae,null))};a(386),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[235,1,2]]]);
//# sourceMappingURL=main.5f17862c.chunk.js.map